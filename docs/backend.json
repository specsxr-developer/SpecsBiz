
{
  "entities": {
    "Product": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Product",
      "type": "object",
      "description": "Represents a product in the inventory.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the Product entity."
        },
        "name": {
          "type": "string",
          "description": "Name of the product."
        },
        "description": {
          "type": "string",
          "description": "Detailed description of the product."
        },
        "sku": {
          "type": "string",
          "description": "Stock Keeping Unit, a unique identifier for the product."
        },
        "barcode": {
          "type": "string",
          "description": "Barcode of the product for easy scanning."
        },
        "price": {
          "type": "number",
          "description": "Price of the product."
        },
        "stockQuantity": {
          "type": "number",
          "description": "Current stock quantity of the product."
        },
        "alertThreshold": {
          "type": "number",
          "description": "Minimum stock quantity before an alert is triggered."
        }
      },
      "required": [
        "id",
        "name",
        "price",
        "stockQuantity"
      ]
    },
    "Sale": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Sale",
      "type": "object",
      "description": "Represents a sale transaction.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the Sale entity."
        },
        "customerId": {
          "type": "string",
          "description": "Reference to Customer. (Relationship: Customer 1:N Sale)"
        },
        "saleDate": {
          "type": "string",
          "description": "Date and time of the sale.",
          "format": "date-time"
        },
        "totalAmount": {
          "type": "number",
          "description": "Total amount of the sale."
        },
        "productIds": {
          "type": "array",
          "description": "References to Products. (Relationship: Sale 1:N Product)",
          "items": {
            "type": "string"
          }
        }
      },
      "required": [
        "id",
        "customerId",
        "saleDate",
        "totalAmount"
      ]
    },
    "Customer": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Customer",
      "type": "object",
      "description": "Represents a customer with credit/baki management.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the Customer entity."
        },
        "firstName": {
          "type": "string",
          "description": "First name of the customer."
        },
        "lastName": {
          "type": "string",
          "description": "Last name of the customer."
        },
        "email": {
          "type": "string",
          "description": "Email address of the customer.",
          "format": "email"
        },
        "phone": {
          "type": "string",
          "description": "Phone number of the customer."
        },
        "address": {
          "type": "string",
          "description": "Address of the customer."
        },
        "totalDue": {
          "type": "number",
          "description": "Total amount of credit/baki the customer currently has."
        },
        "segment": {
          "type": "string",
          "description": "Customer segment for categorization."
        }
      },
      "required": [
        "id",
        "firstName",
        "email"
      ]
    },
    "BakiRecord": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "BakiRecord",
      "type": "object",
      "description": "Represents a specific debt entry for a customer.",
      "properties": {
        "id": { "type": "string" },
        "productName": { "type": "string" },
        "quantity": { "type": "number" },
        "amount": { "type": "number" },
        "takenDate": { "type": "string", "format": "date-time" },
        "promiseDate": { "type": "string", "format": "date-time" },
        "status": { "type": "string", "enum": ["pending", "paid"] }
      }
    },
    "Report": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Report",
      "type": "object",
      "description": "Represents a business report.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the Report entity."
        },
        "reportDate": {
          "type": "string",
          "description": "Date the report was generated.",
          "format": "date-time"
        },
        "type": {
          "type": "string",
          "description": "Type of report (e.g., sales, revenue)."
        },
        "data": {
          "type": "string",
          "description": "Report data in JSON format."
        }
      },
      "required": [
        "id",
        "reportDate",
        "type",
        "data"
      ]
    },
    "User": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "User",
      "type": "object",
      "description": "Represents a user of the application.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the User entity."
        },
        "username": {
          "type": "string",
          "description": "Username of the user."
        },
        "email": {
          "type": "string",
          "description": "Email address of the user.",
          "format": "email"
        },
        "role": {
          "type": "string",
          "description": "Role of the user (e.g., admin, staff)."
        },
        "isSecret": {
          "type": "boolean",
          "description": "Boolean value to determine if user is the secret account."
        }
      },
      "required": [
        "id",
        "username",
        "email",
        "role"
      ]
    }
  },
  "auth": {
    "providers": [
      "password",
      "anonymous"
    ]
  },
  "firestore": {
    "structure": [
      {
        "path": "/users/{userId}",
        "definition": {
          "entityName": "User",
          "schema": {
            "$ref": "#/backend/entities/User"
          }
        }
      },
      {
        "path": "/users/{userId}/products/{productId}",
        "definition": {
          "entityName": "Product",
          "schema": {
            "$ref": "#/backend/entities/Product"
          }
        }
      },
      {
        "path": "/users/{userId}/customers/{customerId}",
        "definition": {
          "entityName": "Customer",
          "schema": {
            "$ref": "#/backend/entities/Customer"
          }
        }
      },
      {
        "path": "/users/{userId}/customers/{customerId}/bakiRecords/{recordId}",
        "definition": {
          "entityName": "BakiRecord",
          "schema": {
            "$ref": "#/backend/entities/BakiRecord"
          },
          "description": "Detailed records of what items were taken on credit by this customer."
        }
      },
      {
        "path": "/users/{userId}/sales/{saleId}",
        "definition": {
          "entityName": "Sale",
          "schema": {
            "$ref": "#/backend/entities/Sale"
          }
        }
      }
    ]
  }
}
